<ui:composition template="/WEB-INF/template.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:p="http://primefaces.org/ui">
    
    <ui:define name="title">Multicinema-Index</ui:define>
    <ui:define name="content">
        #{sesion.validateEmail()}
        <h:outputStylesheet library="css" name="StyleLogin.css"/> 
        <div class="view full-page-intro" style="background-image: url('https://mdbootstrap.com/img/Photos/Others/images/78.jpg'); background-repeat: no-repeat; background-size: cover;">
            <div class="mask rgba-black-light d-flex justify-content-center align-items-center">
              <div class="container">
                <div class="row wow fadeIn">
                  <div class="col-md-6 mb-4 white-text text-center text-md-left">
                        <h1 class="display-4 font-weight-bold">Multicinema S.A</h1>
                    <hr class="hr-light"/>
                    <p>
                      <strong>Disfrute de una aplicacion desarrollada en JAVA utilizando JSF,Hibernate y Primal Faces</strong>
                    </p>
                    <p class="mb-4 d-none d-md-block">
                      <strong></strong>
                    </p>
                  </div>
                  <div class="col-md-6 col-xl-5 mb-4">
                    <div class="card">
                      <div class="card-body">
                        <h:form>
                          <h3 class="dark-grey-text text-center">
                            <strong>Iniciar Sesión</strong>
                          </h3>
                          <hr/>
                             <div class="md-form">
                                <i class="fas fa-envelope prefix grey-text"></i>
                                <p:inputText id="form2" class="form-control" value="#{sesion.usuario.correo}" required="true" placeholder="alguien@example.com" 
                                     requiredMessage="Debe ingresar un email"
                                     validatorMessage="Email Invalido">
                                     <f:validateRegex pattern="^((\w){1,}(\.){0,1}){1,}@\w{3,}((\.)[A-Za-z]{2,3}){1,}$"/>
                                </p:inputText>
                            </div>
                            <div class="md-form">
                                <i class="fas fa-lock prefix grey-text"></i>
                                <p:password id="txtpass" class="form-control" value="#{sesion.usuario.password}" required="true" placeholder="********"
                                        requiredMessage="Debe ingresar una contraseña"
                                        validatorMessage="Contraseña no cumple formato">
                                        <f:validateRegex pattern="^[A-za-z0-9]{8,}$"/>   
                                </p:password>
                            </div>
                            <div class="text-center">
                                <p:messages closable="true" />
                                <h:commandButton value="Entrar" action="#{sesion.iniciarSesion}" class="btn btn-success"/>
                            </div>
                            <hr/>
                        </h:form>    
                           <button id="btnmodalRecover" class="text-info btn btn-white border-0 p-0 shadow-none">Olvido su contraseña?</button>,<button id="btnmodalRegister" class="text-success btn btn-white border-0 p-0 shadow-none">Registrarse</button>
                      </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
       
        <h:outputScript>
            $(document).ready(function (){
                $('#btnmodalRecover').on("click",function(e){
                    e.preventDefault();
                    $('#modalRecoverForm').modal('show');
                });
                 $('#btnmodalRegister').on("click",function(e){
                    e.preventDefault();
                    $('#modalRegisterForm').modal('show');
                });
            });            
        </h:outputScript>
        
        
        <!-- Modal para recuperar contraseña -->
        <div class="modal fade" id="modalRecoverForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
              <h:form>
                <div class="modal-header text-center">
                  <h4 class="modal-title w-100 font-weight-bold">Recuperar contraseña</h4>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true"><i class="fas fa-times"></i></span>
                  </button>
                </div>
                <div class="modal-body mx-3">
                  <div class="md-form mb-5">
                    <i class="fas fa-envelope prefix grey-text"></i>
                      <p:inputText id="form2" class="form-control" value="#{sesion.usuario.correo}" required="true" placeholder="alguien@example.com" 
                                     requiredMessage="Debe ingresar un email valido para recuperar su contraseña"
                                     validatorMessage="Email ingresado no es valido">
                                     <f:validateRegex pattern="^((\w){1,}(\.){0,1}){1,}@\w{3,}((\.)[A-Za-z]{2,3}){1,}$"/>
                      </p:inputText>
                  </div>
                  <p class="grey-text">Se te enviara tu nueva contraseña por Email</p>
                </div>
                <div class="modal-footer d-flex justify-content-center">
                    <h:commandButton class="btn btn-success" action="#{sesion.recuperarContrasenia}" value="Recuperar" ></h:commandButton>
                </div>
                </h:form>
              </div>
            </div>
          </div>
        <!-- Modal para recuperar contraseña-->
        
        <!-- Modal para registrarse -->
        <div class="modal fade" id="modalRegisterForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header text-center">
                  <h4 class="modal-title w-100 font-weight-bold">Registrarse</h4>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true"><i class="fas fa-times"></i></span>
                  </button>
                </div>
                <div class="modal-body mx-3">
                <h:form>
                  <div class="md-form mb-5">
                    <i class="fas fa-user prefix grey-text"></i>
                    <p:inputText class="form-control" value="#{sesion.usuario.nombre}" required="true" placeholder="Kevin Matthew Cruz Pablo" 
                                     requiredMessage="Debe ingresar un nombre"
                                     validatorMessage="Nombre ingresado no valido">
                                     <f:validateRegex pattern="^[A-Za-z]{4,}(( ){0,1}[A-Za-z]{4,}){0,}$"/>
                      </p:inputText>
                  </div>
                    <div class="md-form mb-5">
                    <i class="fas fa-user prefix grey-text"></i>
                    <p:inputText class="form-control" value="#{sesion.usuario.direccion}" required="true" placeholder="Soyapango, San Salvador" 
                                     requiredMessage="Debe ingresar una direccion"
                                     validatorMessage="Direccion ingresada no valido">
                                     <f:validateRegex pattern="^[A-Za-z]{5,}(((\,( )|\,){0,1}[A-Za-z]{2,}|( ){0,1}){1,}){0,}$"/>
                      </p:inputText>
                  </div>
                  <div class="md-form mb-5">
                    <i class="fas fa-phone prefix grey-text"></i>
                   <p:inputText  class="form-control" value="#{sesion.usuario.telefono}" required="true" placeholder="XXXX-XXXX" 
                                     requiredMessage="Debe ingresar un numero"
                                     validatorMessage="Numero ingresado no valido">
                                     <f:validateRegex pattern="^[9|6|7][0-9]{7}$"/>
                      </p:inputText>
                  </div>

                  <div class="md-form mb-5">
                    <i class="fas fa-envelope prefix grey-text"></i>
                     <p:inputText  class="form-control" value="#{sesion.usuario.correo}" required="true" placeholder="alguien@example.com" 
                                     requiredMessage="Debe ingresar un email"
                                     validatorMessage="Email ingresado no es valido">
                                     <f:validateRegex pattern="^((\w){1,}(\.){0,1}){1,}@\w{3,}((\.)[A-Za-z]{2,3}){1,}$"/>
                      </p:inputText>
                  </div>

                  <div class="md-form mb-5">
                    <i class="far fa-id-card prefix grey-text"></i>
                    <p:inputText  class="form-control" value="#{sesion.usuario.dui}" required="true" placeholder="XXXXXXXX-X" 
                                     requiredMessage="Debe ingresar un numero DUI"
                                     validatorMessage="DUI ingresado no valido">
                                     <f:validateRegex pattern="^[0-9]{8}-[0-9]$"/>
                    </p:inputText>
                  </div>

                  <div class="md-form mb-5">
                    <i class="fas fa-key prefix grey-text"></i>
                    <p:password id="txtnewpass" class="form-control" value="#{sesion.usuario.password}" required="true" placeholder="********"
                                        requiredMessage="Debe ingresar una contraseña"
                                        validatorMessage="Longitud minima: 8 Caracteres">
                                        <f:validateRegex pattern="^[A-za-z0-9]{8,}$"/>   
                    </p:password>
                  </div>
                      <p:messages closable="true" id="messages" />
                    <div class="modal-footer d-flex justify-content-center">
                        <p:commandButton update="messages" validateClient="true" value="Registrarse" action="${sesion.registrarUusario}" style="margin-right:10px"/>
                    </div>

                    </h:form>
                </div>
                        
              
              </div>
            </div>
            </div>
       
        
    </ui:define>
</ui:composition>

	